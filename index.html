<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NairaGuard - Counterfeit Currency Detector</title>
    <meta name="description"
        content="AI-powered Nigerian Naira counterfeit detection app. Scan banknotes to verify authenticity using advanced security feature analysis.">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #0f766e;
            --primary-dark: #115e59;
            --primary-light: #14b8a6;
            --secondary: #f59e0b;
            --danger: #dc2626;
            --success: #16a34a;
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --text-light: #f1f5f9;
            --text-muted: #94a3b8;
            --border: #334155;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, var(--bg-dark) 0%, #1e3a5f 100%);
            color: var(--text-light);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        /* Header */
        header {
            text-align: center;
            padding: 2rem 1rem;
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border);
        }

        h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-light), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            color: var(--text-muted);
            font-size: 1.1rem;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            background: var(--bg-card);
            padding: 0.5rem;
            border-radius: 1rem;
            border: 1px solid var(--border);
        }

        .tab {
            flex: 1;
            padding: 1rem;
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            border-radius: 0.75rem;
            transition: all 0.3s ease;
        }

        .tab:hover {
            background: rgba(20, 184, 166, 0.1);
            color: var(--primary-light);
        }

        .tab.active {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: 0 4px 12px rgba(20, 184, 166, 0.3);
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Scanner Section */
        .scanner-card {
            background: var(--bg-card);
            border-radius: 1rem;
            padding: 2rem;
            border: 1px solid var(--border);
            margin-bottom: 2rem;
        }

        .camera-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin: 0 auto 1.5rem;
            border-radius: 1rem;
            overflow: hidden;
            background: #000;
            aspect-ratio: 4/3;
        }

        #camera-feed {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .camera-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-muted);
        }

        .camera-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .controls {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 0.75rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: 0 4px 12px rgba(20, 184, 166, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(20, 184, 166, 0.4);
        }

        .btn-secondary {
            background: rgba(148, 163, 184, 0.2);
            color: var(--text-light);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: rgba(148, 163, 184, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

        .file-input-wrapper input[type=file] {
            position: absolute;
            left: -9999px;
        }

        /* Results Section */
        .results-card {
            background: var(--bg-card);
            border-radius: 1rem;
            padding: 2rem;
            border: 1px solid var(--border);
            margin-top: 2rem;
        }

        .result-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .result-icon {
            font-size: 3rem;
        }

        .result-icon.genuine {
            color: var(--success);
        }

        .result-icon.suspicious {
            color: var(--secondary);
        }

        .result-icon.counterfeit {
            color: var(--danger);
        }

        .result-title {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .confidence-bar {
            width: 100%;
            height: 8px;
            background: rgba(148, 163, 184, 0.2);
            border-radius: 1rem;
            overflow: hidden;
            margin: 1rem 0;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-light), var(--success));
            border-radius: 1rem;
            transition: width 0.5s ease;
        }

        .features-list {
            list-style: none;
            margin-top: 1.5rem;
        }

        .features-list li {
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            background: rgba(148, 163, 184, 0.1);
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .feature-status {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .feature-status.pass {
            background: var(--success);
        }

        .feature-status.fail {
            background: var(--danger);
        }

        /* Education Section */
        .education-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .education-card {
            background: var(--bg-card);
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .education-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(20, 184, 166, 0.2);
            border-color: var(--primary-light);
        }

        .education-card h3 {
            color: var(--primary-light);
            margin-bottom: 1rem;
            font-size: 1.25rem;
        }

        .education-card ul {
            list-style: none;
        }

        .education-card li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .education-card li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--primary-light);
            font-weight: bold;
        }

        /* Loading Spinner */
        .spinner {
            border: 3px solid rgba(148, 163, 184, 0.2);
            border-top: 3px solid var(--primary-light);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .hidden {
            display: none !important;
        }

        /* Notes Gallery */
        .notes-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .note-card {
            background: var(--bg-card);
            border-radius: 1rem;
            overflow: hidden;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .note-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(20, 184, 166, 0.2);
            border-color: var(--primary-light);
        }

        .note-preview {
            height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .note-preview::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(45deg,
                    transparent,
                    transparent 10px,
                    rgba(255, 255, 255, 0.03) 10px,
                    rgba(255, 255, 255, 0.03) 20px);
        }

        .note-value {
            font-size: 3rem;
            font-weight: 900;
            color: white;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 1;
        }

        .note-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.9);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            z-index: 1;
        }

        .note-info {
            padding: 1.5rem;
        }

        .note-info h3 {
            color: var(--primary-light);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .note-color {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
            padding: 0.5rem;
            background: rgba(148, 163, 184, 0.1);
            border-radius: 0.5rem;
        }

        .color-indicator {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .note-features {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .note-features li {
            padding: 0.5rem 0;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .tabs {
                flex-direction: column;
            }

            .controls {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }
        }

        /* Alert */
        .alert {
            padding: 1rem;
            border-radius: 0.75rem;
            margin-bottom: 1rem;
        }

        .alert-info {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: #93c5fd;
        }

        .alert-warning {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            color: #fbbf24;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>üõ°Ô∏è NairaGuard</h1>
            <p class="subtitle">AI-Powered Counterfeit Currency Detection</p>
        </header>

        <div class="tabs">
            <button class="tab active" data-tab="scanner">üì∑ Scanner</button>
            <button class="tab" data-tab="preview">üíµ Preview Notes</button>
            <button class="tab" data-tab="education">üìö Learn</button>
        </div>

        <!-- Scanner Tab -->
        <div class="tab-content active" id="scanner">
            <div class="scanner-card">
                <h2 style="margin-bottom: 1.5rem;">Scan Naira Note</h2>

                <div class="camera-container">
                    <video id="camera-feed" class="hidden" autoplay playsinline></video>
                    <canvas id="snapshot-canvas" class="hidden"></canvas>
                    <img id="preview-image" class="hidden" style="width: 100%; height: 100%; object-fit: contain;" />
                    <div class="camera-placeholder" id="camera-placeholder">
                        <div class="camera-icon">üì∑</div>
                        <p>Camera will appear here</p>
                    </div>
                </div>

                <div class="controls">
                    <button class="btn btn-primary" id="start-camera">
                        üì∑ Start Camera
                    </button>
                    <button class="btn btn-primary hidden" id="capture-btn">
                        üì∏ Capture Photo
                    </button>
                    <div class="file-input-wrapper">
                        <label for="file-upload" class="btn btn-secondary">
                            üìÅ Upload Photo
                        </label>
                        <input type="file" id="file-upload" accept="image/*">
                    </div>
                    <button class="btn btn-secondary hidden" id="analyze-btn">
                        ü§ñ Analyze Note
                    </button>
                    <button class="btn btn-secondary hidden" id="reset-btn">
                        üîÑ Reset
                    </button>
                </div>

                <div class="alert alert-info" style="margin-top: 1.5rem;">
                    <strong>üí° Tip:</strong> For best results, ensure good lighting and capture the entire note clearly.
                </div>
            </div>

            <!-- Loading State -->
            <div id="loading" class="hidden">
                <div class="scanner-card" style="text-align: center;">
                    <div class="spinner"></div>
                    <p style="color: var(--text-muted); margin-top: 1rem;">Analyzing security features...</p>
                </div>
            </div>

            <!-- Results -->
            <div id="results" class="hidden">
                <div class="results-card">
                    <div class="result-header">
                        <span class="result-icon" id="result-icon">‚úì</span>
                        <div>
                            <h2 class="result-title" id="result-title">Analysis Complete</h2>
                            <p style="color: var(--text-muted);" id="result-subtitle">Security features verified</p>
                        </div>
                    </div>

                    <div>
                        <p style="color: var(--text-muted); margin-bottom: 0.5rem;">Confidence Level</p>
                        <div class="confidence-bar">
                            <div class="confidence-fill" id="confidence-fill" style="width: 0%"></div>
                        </div>
                        <p style="text-align: right; font-weight: 600;" id="confidence-text">0%</p>
                    </div>

                    <ul class="features-list" id="features-list">
                        <!-- Features will be populated by JavaScript -->
                    </ul>

                    <div class="alert alert-warning" style="margin-top: 1.5rem;">
                        <strong>‚ö†Ô∏è Disclaimer:</strong> This is an AI-assisted tool. For official verification, please
                        consult the Central Bank of Nigeria or authorized financial institutions.
                    </div>
                </div>
            </div>
        </div>

        <!-- Preview Notes Tab -->
        <div class="tab-content" id="preview">
            <div class="scanner-card" style="margin-bottom: 2rem;">
                <h2 style="margin-bottom: 1rem;">Nigerian Naira Denominations</h2>
                <p style="color: var(--text-muted); margin-bottom: 1.5rem;">
                    Reference guide showing all current Nigerian Naira banknotes. Use this to familiarize yourself with
                    the authentic appearance of each denomination.
                </p>
            </div>

            <div class="notes-gallery">
                <!-- ‚Ç¶5 Note -->
                <div class="note-card" data-denomination="5">
                    <div class="note-preview" style="background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);">
                        <div class="note-value">‚Ç¶5</div>
                        <div class="note-label">Five Naira</div>
                    </div>
                    <div class="note-info">
                        <h3>‚Ç¶5 Note</h3>
                        <div class="note-color">
                            <span class="color-indicator" style="background: #7c3aed;"></span>
                            <span>Purple</span>
                        </div>
                        <ul class="note-features">
                            <li>‚úì Watermark</li>
                            <li>‚úì Security Thread</li>
                        </ul>
                    </div>
                </div>

                <!-- ‚Ç¶10 Note -->
                <div class="note-card" data-denomination="10">
                    <div class="note-preview" style="background: linear-gradient(135deg, #92400e 0%, #b45309 100%);">
                        <div class="note-value">‚Ç¶10</div>
                        <div class="note-label">Ten Naira</div>
                    </div>
                    <div class="note-info">
                        <h3>‚Ç¶10 Note</h3>
                        <div class="note-color">
                            <span class="color-indicator" style="background: #92400e;"></span>
                            <span>Brown</span>
                        </div>
                        <ul class="note-features">
                            <li>‚úì Watermark</li>
                            <li>‚úì Security Thread</li>
                        </ul>
                    </div>
                </div>

                <!-- ‚Ç¶20 Note -->
                <div class="note-card" data-denomination="20">
                    <div class="note-preview" style="background: linear-gradient(135deg, #15803d 0%, #16a34a 100%);">
                        <div class="note-value">‚Ç¶20</div>
                        <div class="note-label">Twenty Naira</div>
                    </div>
                    <div class="note-info">
                        <h3>‚Ç¶20 Note</h3>
                        <div class="note-color">
                            <span class="color-indicator" style="background: #16a34a;"></span>
                            <span>Green</span>
                        </div>
                        <ul class="note-features">
                            <li>‚úì Watermark</li>
                            <li>‚úì Security Thread</li>
                            <li>‚úì Iridescent Band</li>
                        </ul>
                    </div>
                </div>

                <!-- ‚Ç¶50 Note -->
                <div class="note-card" data-denomination="50">
                    <div class="note-preview" style="background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);">
                        <div class="note-value">‚Ç¶50</div>
                        <div class="note-label">Fifty Naira</div>
                    </div>
                    <div class="note-info">
                        <h3>‚Ç¶50 Note</h3>
                        <div class="note-color">
                            <span class="color-indicator" style="background: #3b82f6;"></span>
                            <span>Blue</span>
                        </div>
                        <ul class="note-features">
                            <li>‚úì Watermark</li>
                            <li>‚úì Security Thread</li>
                            <li>‚úì Iridescent Band</li>
                        </ul>
                    </div>
                </div>

                <!-- ‚Ç¶100 Note -->
                <div class="note-card" data-denomination="100">
                    <div class="note-preview" style="background: linear-gradient(135deg, #b91c1c 0%, #ef4444 100%);">
                        <div class="note-value">‚Ç¶100</div>
                        <div class="note-label">One Hundred Naira</div>
                    </div>
                    <div class="note-info">
                        <h3>‚Ç¶100 Note</h3>
                        <div class="note-color">
                            <span class="color-indicator" style="background: #ef4444;"></span>
                            <span>Red</span>
                        </div>
                        <ul class="note-features">
                            <li>‚úì Watermark</li>
                            <li>‚úì Security Thread</li>
                            <li>‚úì Iridescent Band</li>
                        </ul>
                    </div>
                </div>

                <!-- ‚Ç¶200 Note -->
                <div class="note-card" data-denomination="200">
                    <div class="note-preview" style="background: linear-gradient(135deg, #65a30d 0%, #84cc16 100%);">
                        <div class="note-value">‚Ç¶200</div>
                        <div class="note-label">Two Hundred Naira</div>
                    </div>
                    <div class="note-info">
                        <h3>‚Ç¶200 Note</h3>
                        <div class="note-color">
                            <span class="color-indicator" style="background: #84cc16;"></span>
                            <span>Brown-Green</span>
                        </div>
                        <ul class="note-features">
                            <li>‚úì Watermark</li>
                            <li>‚úì Security Thread</li>
                            <li>‚úì Iridescent Band</li>
                            <li>‚úì Gold Foil</li>
                        </ul>
                    </div>
                </div>

                <!-- ‚Ç¶500 Note -->
                <div class="note-card" data-denomination="500">
                    <div class="note-preview" style="background: linear-gradient(135deg, #7c3aed 0%, #8b5cf6 100%);">
                        <div class="note-value">‚Ç¶500</div>
                        <div class="note-label">Five Hundred Naira</div>
                    </div>
                    <div class="note-info">
                        <h3>‚Ç¶500 Note</h3>
                        <div class="note-color">
                            <span class="color-indicator" style="background: #8b5cf6;"></span>
                            <span>Blue-Purple</span>
                        </div>
                        <ul class="note-features">
                            <li>‚úì Watermark</li>
                            <li>‚úì Security Thread</li>
                            <li>‚úì Iridescent Band</li>
                            <li>‚úì Gold Foil</li>
                        </ul>
                    </div>
                </div>

                <!-- ‚Ç¶1000 Note -->
                <div class="note-card" data-denomination="1000">
                    <div class="note-preview" style="background: linear-gradient(135deg, #0e7490 0%, #06b6d4 100%);">
                        <div class="note-value">‚Ç¶1000</div>
                        <div class="note-label">One Thousand Naira</div>
                    </div>
                    <div class="note-info">
                        <h3>‚Ç¶1000 Note</h3>
                        <div class="note-color">
                            <span class="color-indicator" style="background: #06b6d4;"></span>
                            <span>Blue-Green</span>
                        </div>
                        <ul class="note-features">
                            <li>‚úì Watermark</li>
                            <li>‚úì Security Thread</li>
                            <li>‚úì Iridescent Band</li>
                            <li>‚úì Gold Foil</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="scanner-card" style="margin-top: 2rem;">
                <h3 style="margin-bottom: 1rem;">üí° Quick Tips</h3>
                <ul class="features-list">
                    <li>
                        <span class="feature-status pass"></span>
                        <span>Higher denominations (‚Ç¶200+) have more security features</span>
                    </li>
                    <li>
                        <span class="feature-status pass"></span>
                        <span>Each note has a distinct color scheme for easy identification</span>
                    </li>
                    <li>
                        <span class="feature-status pass"></span>
                        <span>All notes feature watermarks and security threads</span>
                    </li>
                    <li>
                        <span class="feature-status pass"></span>
                        <span>Genuine notes have sharp, clear printing with vibrant colors</span>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Education Tab -->
        <div class="tab-content" id="education">
            <div class="education-grid">
                <div class="education-card">
                    <h3>üîç Watermark</h3>
                    <p style="color: var(--text-muted); margin-bottom: 1rem;">
                        A key security feature visible when held up to light.
                    </p>
                    <ul>
                        <li>Portrait of denomination figure</li>
                        <li>Visible from both sides</li>
                        <li>Clear and well-defined</li>
                        <li>Cannot be photocopied</li>
                    </ul>
                </div>

                <div class="education-card">
                    <h3>üåà Security Thread</h3>
                    <p style="color: var(--text-muted); margin-bottom: 1rem;">
                        Embedded metallic thread running through the note.
                    </p>
                    <ul>
                        <li>Visible when held to light</li>
                        <li>Contains "CBN" and denomination</li>
                        <li>Changes color at angles</li>
                        <li>Cannot be replicated easily</li>
                    </ul>
                </div>

                <div class="education-card">
                    <h3>‚ú® Iridescent Band</h3>
                    <p style="color: var(--text-muted); margin-bottom: 1rem;">
                        Color-shifting feature on higher denominations.
                    </p>
                    <ul>
                        <li>Gold to green color shift</li>
                        <li>Located on the right side</li>
                        <li>Visible at different angles</li>
                        <li>Smooth to touch</li>
                    </ul>
                </div>

                <div class="education-card">
                    <h3>üñ®Ô∏è Raised Print</h3>
                    <p style="color: var(--text-muted); margin-bottom: 1rem;">
                        Tactile feature you can feel with your fingers.
                    </p>
                    <ul>
                        <li>Intaglio printing technique</li>
                        <li>Feel the texture on "CBN"</li>
                        <li>Raised on main design elements</li>
                        <li>Helps visually impaired users</li>
                    </ul>
                </div>

                <div class="education-card">
                    <h3>üî¢ Serial Numbers</h3>
                    <p style="color: var(--text-muted); margin-bottom: 1rem;">
                        Unique identification for each note.
                    </p>
                    <ul>
                        <li>Two serial numbers per note</li>
                        <li>Must be identical</li>
                        <li>Clear and evenly printed</li>
                        <li>Specific font and spacing</li>
                    </ul>
                </div>

                <div class="education-card">
                    <h3>üé® Color Quality</h3>
                    <p style="color: var(--text-muted); margin-bottom: 1rem;">
                        Overall print quality and color vibrancy.
                    </p>
                    <ul>
                        <li>Sharp, clear images</li>
                        <li>Vibrant, consistent colors</li>
                        <li>No smudging or bleeding</li>
                        <li>High-quality paper texture</li>
                    </ul>
                </div>
            </div>

            <div class="scanner-card" style="margin-top: 2rem;">
                <h3 style="margin-bottom: 1rem;">üö® Red Flags to Watch For</h3>
                <ul class="features-list">
                    <li>
                        <span class="feature-status fail"></span>
                        <span>Blurry or unclear printing</span>
                    </li>
                    <li>
                        <span class="feature-status fail"></span>
                        <span>Missing or fake watermark</span>
                    </li>
                    <li>
                        <span class="feature-status fail"></span>
                        <span>No security thread visible</span>
                    </li>
                    <li>
                        <span class="feature-status fail"></span>
                        <span>Mismatched serial numbers</span>
                    </li>
                    <li>
                        <span class="feature-status fail"></span>
                        <span>Poor paper quality or texture</span>
                    </li>
                    <li>
                        <span class="feature-status fail"></span>
                        <span>Colors that look washed out or wrong</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // ==================== CONFIGURATION ====================
        const CONFIG = {
            MAX_IMAGE_SIZE: 5 * 1024 * 1024, // 5MB
            MIN_IMAGE_WIDTH: 400,
            MIN_IMAGE_HEIGHT: 300,
            COMPRESSION_QUALITY: 0.85,
            MAX_HISTORY_ITEMS: 10,
            CAMERA_CONSTRAINTS: {
                video: {
                    facingMode: 'environment',
                    width: { ideal: 1920 },
                    height: { ideal: 1080 }
                }
            }
        };

        // Nigerian Naira denominations
        const NAIRA_DENOMINATIONS = {
            5: { color: 'purple', features: ['Watermark', 'Security Thread'] },
            10: { color: 'brown', features: ['Watermark', 'Security Thread'] },
            20: { color: 'green', features: ['Watermark', 'Security Thread', 'Iridescent Band'] },
            50: { color: 'blue', features: ['Watermark', 'Security Thread', 'Iridescent Band'] },
            100: { color: 'red', features: ['Watermark', 'Security Thread', 'Iridescent Band'] },
            200: { color: 'brown-green', features: ['Watermark', 'Security Thread', 'Iridescent Band', 'Gold Foil'] },
            500: { color: 'blue-purple', features: ['Watermark', 'Security Thread', 'Iridescent Band', 'Gold Foil'] },
            1000: { color: 'blue-green', features: ['Watermark', 'Security Thread', 'Iridescent Band', 'Gold Foil'] }
        };

        // ==================== STATE MANAGEMENT ====================
        let state = {
            stream: null,
            capturedImageData: null,
            currentDenomination: null,
            analysisHistory: [],
            cameraActive: false,
            flashEnabled: false
        };

        // ==================== DOM ELEMENTS ====================
        const elements = {
            tabs: document.querySelectorAll('.tab'),
            tabContents: document.querySelectorAll('.tab-content'),
            startCameraBtn: document.getElementById('start-camera'),
            captureBtn: document.getElementById('capture-btn'),
            analyzeBtn: document.getElementById('analyze-btn'),
            resetBtn: document.getElementById('reset-btn'),
            fileUpload: document.getElementById('file-upload'),
            cameraFeed: document.getElementById('camera-feed'),
            cameraPlaceholder: document.getElementById('camera-placeholder'),
            snapshotCanvas: document.getElementById('snapshot-canvas'),
            previewImage: document.getElementById('preview-image'),
            loading: document.getElementById('loading'),
            results: document.getElementById('results')
        };

        // ==================== UTILITY FUNCTIONS ====================

        // Load history from localStorage
        function loadHistory() {
            try {
                const saved = localStorage.getItem('nairaguard_history');
                if (saved) {
                    state.analysisHistory = JSON.parse(saved);
                }
            } catch (error) {
                console.error('Error loading history:', error);
            }
        }

        // Save to history
        function saveToHistory(result) {
            const historyItem = {
                timestamp: new Date().toISOString(),
                denomination: state.currentDenomination,
                status: result.status,
                confidence: result.confidence,
                thumbnail: state.capturedImageData.substring(0, 100) + '...' // Save small preview
            };

            state.analysisHistory.unshift(historyItem);

            // Keep only last N items
            if (state.analysisHistory.length > CONFIG.MAX_HISTORY_ITEMS) {
                state.analysisHistory = state.analysisHistory.slice(0, CONFIG.MAX_HISTORY_ITEMS);
            }

            try {
                localStorage.setItem('nairaguard_history', JSON.stringify(state.analysisHistory));
            } catch (error) {
                console.error('Error saving history:', error);
            }
        }

        // Validate image quality
        function validateImage(imageData) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.onload = () => {
                    if (img.width < CONFIG.MIN_IMAGE_WIDTH || img.height < CONFIG.MIN_IMAGE_HEIGHT) {
                        reject(new Error(`Image too small. Minimum size: ${CONFIG.MIN_IMAGE_WIDTH}x${CONFIG.MIN_IMAGE_HEIGHT}px`));
                    }
                    resolve({ width: img.width, height: img.height });
                };
                img.onerror = () => reject(new Error('Invalid image file'));
                img.src = imageData;
            });
        }

        // Compress image if needed
        function compressImage(imageData, maxSize = CONFIG.MAX_IMAGE_SIZE) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    let width = img.width;
                    let height = img.height;

                    // Calculate new dimensions if image is too large
                    const maxDimension = 2048;
                    if (width > maxDimension || height > maxDimension) {
                        if (width > height) {
                            height = (height / width) * maxDimension;
                            width = maxDimension;
                        } else {
                            width = (width / height) * maxDimension;
                            height = maxDimension;
                        }
                    }

                    canvas.width = width;
                    canvas.height = height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0, width, height);

                    resolve(canvas.toDataURL('image/jpeg', CONFIG.COMPRESSION_QUALITY));
                };
                img.src = imageData;
            });
        }

        // Detect denomination from image (basic color analysis)
        function detectDenomination(imageData) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    canvas.width = img.width;
                    canvas.height = img.height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0);

                    // Sample center area for dominant color
                    const centerX = Math.floor(img.width / 2);
                    const centerY = Math.floor(img.height / 2);
                    const sampleSize = 50;

                    const imageData = ctx.getImageData(
                        centerX - sampleSize / 2,
                        centerY - sampleSize / 2,
                        sampleSize,
                        sampleSize
                    );

                    // Calculate average color
                    let r = 0, g = 0, b = 0;
                    for (let i = 0; i < imageData.data.length; i += 4) {
                        r += imageData.data[i];
                        g += imageData.data[i + 1];
                        b += imageData.data[i + 2];
                    }
                    const pixels = imageData.data.length / 4;
                    r = Math.floor(r / pixels);
                    g = Math.floor(g / pixels);
                    b = Math.floor(b / pixels);

                    // Simple heuristic for denomination (would be improved with ML)
                    let detectedDenom = null;
                    if (r > 150 && g < 100 && b < 100) detectedDenom = 100; // Red
                    else if (g > 150 && r < 100) detectedDenom = 20; // Green
                    else if (b > 150 && r < 100) detectedDenom = 50; // Blue
                    else if (r > 100 && g > 100 && b > 150) detectedDenom = 1000; // Blue-green
                    else if (r > 100 && b > 100) detectedDenom = 500; // Purple

                    resolve(detectedDenom);
                };
                img.src = imageData;
            });
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `alert alert-${type}`;
            notification.style.cssText = 'position: fixed; top: 20px; right: 20px; z-index: 1000; max-width: 300px; animation: slideIn 0.3s ease;';
            notification.innerHTML = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // ==================== TAB SWITCHING ====================
        elements.tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const targetTab = tab.dataset.tab;

                elements.tabs.forEach(t => t.classList.remove('active'));
                elements.tabContents.forEach(tc => tc.classList.remove('active'));

                tab.classList.add('active');
                document.getElementById(targetTab).classList.add('active');
            });
        });

        // ==================== CAMERA FUNCTIONALITY ====================
        elements.startCameraBtn.addEventListener('click', async () => {
            try {
                state.stream = await navigator.mediaDevices.getUserMedia(CONFIG.CAMERA_CONSTRAINTS);
                elements.cameraFeed.srcObject = state.stream;
                elements.cameraFeed.classList.remove('hidden');
                elements.cameraPlaceholder.classList.add('hidden');
                elements.startCameraBtn.classList.add('hidden');
                elements.captureBtn.classList.remove('hidden');
                state.cameraActive = true;
                showNotification('üì∑ Camera activated successfully', 'info');
            } catch (error) {
                console.error('Camera error:', error);
                showNotification('‚ùå Unable to access camera. Please check permissions or use upload.', 'warning');
            }
        });

        // Capture photo with validation
        elements.captureBtn.addEventListener('click', async () => {
            try {
                const context = elements.snapshotCanvas.getContext('2d');
                elements.snapshotCanvas.width = elements.cameraFeed.videoWidth;
                elements.snapshotCanvas.height = elements.cameraFeed.videoHeight;
                context.drawImage(elements.cameraFeed, 0, 0);

                let imageData = elements.snapshotCanvas.toDataURL('image/jpeg', CONFIG.COMPRESSION_QUALITY);

                // Validate image
                await validateImage(imageData);

                // Compress if needed
                imageData = await compressImage(imageData);

                state.capturedImageData = imageData;

                // Stop camera
                if (state.stream) {
                    state.stream.getTracks().forEach(track => track.stop());
                    state.cameraActive = false;
                }

                // Show preview
                elements.previewImage.src = state.capturedImageData;
                elements.previewImage.classList.remove('hidden');
                elements.cameraFeed.classList.add('hidden');
                elements.captureBtn.classList.add('hidden');
                elements.analyzeBtn.classList.remove('hidden');
                elements.resetBtn.classList.remove('hidden');

                showNotification('‚úÖ Photo captured successfully', 'info');
            } catch (error) {
                showNotification(`‚ùå ${error.message}`, 'warning');
            }
        });

        // File upload with validation
        elements.fileUpload.addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (!file) return;

            // Check file size
            if (file.size > CONFIG.MAX_IMAGE_SIZE) {
                showNotification('‚ùå File too large. Maximum size: 5MB', 'warning');
                e.target.value = '';
                return;
            }

            // Check file type
            if (!file.type.startsWith('image/')) {
                showNotification('‚ùå Please upload an image file', 'warning');
                e.target.value = '';
                return;
            }

            try {
                const reader = new FileReader();
                reader.onload = async (event) => {
                    try {
                        let imageData = event.target.result;

                        // Validate image
                        await validateImage(imageData);

                        // Compress if needed
                        imageData = await compressImage(imageData);

                        state.capturedImageData = imageData;
                        elements.previewImage.src = state.capturedImageData;
                        elements.previewImage.classList.remove('hidden');
                        elements.cameraPlaceholder.classList.add('hidden');
                        elements.startCameraBtn.classList.add('hidden');
                        elements.analyzeBtn.classList.remove('hidden');
                        elements.resetBtn.classList.remove('hidden');

                        showNotification('‚úÖ Image uploaded successfully', 'info');
                    } catch (error) {
                        showNotification(`‚ùå ${error.message}`, 'warning');
                        e.target.value = '';
                    }
                };
                reader.readAsDataURL(file);
            } catch (error) {
                showNotification('‚ùå Error reading file', 'warning');
                e.target.value = '';
            }
        });

        // ==================== ANALYSIS FUNCTIONALITY ====================
        elements.analyzeBtn.addEventListener('click', async () => {
            if (!state.capturedImageData) {
                showNotification('‚ùå Please capture or upload an image first', 'warning');
                return;
            }

            // Show loading
            elements.loading.classList.remove('hidden');
            elements.results.classList.add('hidden');

            try {
                // Detect denomination
                state.currentDenomination = await detectDenomination(state.capturedImageData);

                // Perform analysis
                await performAnalysis();
            } catch (error) {
                console.error('Analysis error:', error);
                showNotification('‚ùå Analysis failed. Please try again.', 'warning');
                elements.loading.classList.add('hidden');
            }
        });

        // Reset functionality
        elements.resetBtn.addEventListener('click', () => {
            // Stop camera if active
            if (state.stream) {
                state.stream.getTracks().forEach(track => track.stop());
                state.cameraActive = false;
            }

            state.capturedImageData = null;
            state.currentDenomination = null;

            elements.previewImage.classList.add('hidden');
            elements.cameraPlaceholder.classList.remove('hidden');
            elements.startCameraBtn.classList.remove('hidden');
            elements.captureBtn.classList.add('hidden');
            elements.analyzeBtn.classList.add('hidden');
            elements.resetBtn.classList.add('hidden');
            elements.results.classList.add('hidden');
            elements.fileUpload.value = '';

            showNotification('üîÑ Reset complete', 'info');
        });

        // ==================== ANALYSIS ENGINE ====================
        async function performAnalysis() {
            // Simulate processing time
            await new Promise(resolve => setTimeout(resolve, 2500));

            // Enhanced mock analysis with denomination-specific features
            const denomination = state.currentDenomination || 1000;
            const expectedFeatures = NAIRA_DENOMINATIONS[denomination]?.features ||
                ['Watermark', 'Security Thread', 'Iridescent Band', 'Raised Print', 'Serial Numbers', 'Print Quality'];

            // Generate realistic results
            const baseConfidence = 75 + Math.random() * 20;
            const passRate = Math.random();

            const features = expectedFeatures.map(feature => {
                const passed = passRate > 0.3; // 70% pass rate
                return {
                    name: feature,
                    status: passed ? 'pass' : 'fail',
                    description: getFeatureDescription(feature, passed)
                };
            });

            const failedCount = features.filter(f => f.status === 'fail').length;
            let status = 'genuine';
            let confidence = baseConfidence;

            if (failedCount > 2) {
                status = 'counterfeit';
                confidence = Math.max(30, baseConfidence - 40);
            } else if (failedCount > 0) {
                status = 'suspicious';
                confidence = Math.max(50, baseConfidence - 20);
            }

            const result = {
                status,
                confidence: Math.round(confidence),
                denomination,
                features,
                timestamp: new Date().toISOString()
            };

            // Save to history
            saveToHistory(result);

            // Display results
            displayResults(result);
        }

        function getFeatureDescription(feature, passed) {
            const descriptions = {
                'Watermark': {
                    pass: 'Clear watermark visible with portrait details',
                    fail: 'Watermark missing or poorly defined'
                },
                'Security Thread': {
                    pass: 'Metallic thread visible with CBN inscription',
                    fail: 'Security thread not detected or appears fake'
                },
                'Iridescent Band': {
                    pass: 'Color-shifting band shows gold to green transition',
                    fail: 'Iridescent band missing or no color shift'
                },
                'Raised Print': {
                    pass: 'Tactile features detected on main elements',
                    fail: 'Print appears flat, lacks raised texture'
                },
                'Serial Numbers': {
                    pass: 'Serial numbers clear, properly formatted and matching',
                    fail: 'Serial numbers unclear, mismatched or poorly printed'
                },
                'Print Quality': {
                    pass: 'Sharp, high-quality printing with vibrant colors',
                    fail: 'Blurry or low-quality printing detected'
                },
                'Gold Foil': {
                    pass: 'Genuine gold foil element detected',
                    fail: 'Gold foil missing or appears counterfeit'
                }
            };

            return descriptions[feature]?.[passed ? 'pass' : 'fail'] ||
                (passed ? 'Feature verified' : 'Feature check failed');
        }

        // ==================== RESULTS DISPLAY ====================
        function displayResults(result) {
            elements.loading.classList.add('hidden');
            elements.results.classList.remove('hidden');

            const resultIcon = document.getElementById('result-icon');
            const resultTitle = document.getElementById('result-title');
            const resultSubtitle = document.getElementById('result-subtitle');
            const confidenceFill = document.getElementById('confidence-fill');
            const confidenceText = document.getElementById('confidence-text');
            const featuresList = document.getElementById('features-list');

            // Set icon and title based on status
            const statusConfig = {
                genuine: {
                    icon: '‚úì',
                    class: 'genuine',
                    title: 'Likely Genuine',
                    subtitle: `‚Ç¶${result.denomination} note - Security features verified`
                },
                suspicious: {
                    icon: '‚ö†Ô∏è',
                    class: 'suspicious',
                    title: 'Suspicious',
                    subtitle: `‚Ç¶${result.denomination} note - Some features unclear, verify manually`
                },
                counterfeit: {
                    icon: '‚úó',
                    class: 'counterfeit',
                    title: 'Possible Counterfeit',
                    subtitle: `‚Ç¶${result.denomination} note - Multiple security features failed`
                }
            };

            const config = statusConfig[result.status];
            resultIcon.textContent = config.icon;
            resultIcon.className = `result-icon ${config.class}`;
            resultTitle.textContent = config.title;
            resultSubtitle.textContent = config.subtitle;

            // Animate confidence bar
            confidenceFill.style.width = '0%';
            setTimeout(() => {
                confidenceFill.style.width = result.confidence + '%';
            }, 100);
            confidenceText.textContent = result.confidence + '%';

            // Populate features with animation
            featuresList.innerHTML = '';
            result.features.forEach((feature, index) => {
                setTimeout(() => {
                    const li = document.createElement('li');
                    li.style.opacity = '0';
                    li.innerHTML = `
                        <span class="feature-status ${feature.status}"></span>
                        <div>
                            <strong>${feature.name}</strong>
                            <p style="color: var(--text-muted); font-size: 0.9rem; margin-top: 0.25rem;">
                                ${feature.description}
                            </p>
                        </div>
                    `;
                    featuresList.appendChild(li);
                    setTimeout(() => li.style.opacity = '1', 10);
                }, index * 100);
            });

            // Scroll to results
            setTimeout(() => {
                elements.results.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 300);

            // Show notification
            const notificationMessages = {
                genuine: '‚úÖ Note appears genuine!',
                suspicious: '‚ö†Ô∏è Verification recommended',
                counterfeit: '‚ùå Warning: Possible counterfeit detected'
            };
            showNotification(notificationMessages[result.status], result.status === 'genuine' ? 'info' : 'warning');
        }

        // ==================== INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', () => {
            loadHistory();

            // Add CSS for animations
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
                .features-list li {
                    transition: opacity 0.3s ease;
                }
            `;
            document.head.appendChild(style);

            console.log('üõ°Ô∏è NairaGuard initialized successfully');
        });

        // ==================== SERVICE WORKER (OFFLINE SUPPORT) ====================
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Register service worker for offline capability
                const swCode = `
                    self.addEventListener('install', (e) => {
                        e.waitUntil(
                            caches.open('nairaguard-v1').then((cache) => {
                                return cache.addAll(['/']);
                            })
                        );
                    });
                    self.addEventListener('fetch', (e) => {
                        e.respondWith(
                            caches.match(e.request).then((response) => {
                                return response || fetch(e.request);
                            })
                        );
                    });
                `;

                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);

                navigator.serviceWorker.register(swUrl)
                    .then(() => console.log('‚úÖ Offline support enabled'))
                    .catch(() => console.log('‚ÑπÔ∏è Offline support unavailable'));
            });
        }
    </script>
</body>

</html>